#안드로이드 스레드 
> 모든 안드로이드 응용프로그램은 내부 실행을 관리한ㄴ 리눅스 프로세스 및 달빅 VM에 번들된 다수의 스레드와 함께 시작된다. 

##3.1 안드로이드 응용프로그램 스레드 

모든 응용프로그램 스레드는 자바의 Thread를 표현한 리눅스의 네이티브 pthreads를 기반으로 하지만,
안드로이드 플랫 폼은 pthreads와 다르게 하려고 특별한 `3가지 유형`의 속성을 할당했다.
1.UI thread
2.Binder thread
3.Background thread

####3.1.1 UI스레드
>UI스레드는 응용프로그램의 시작과 함께 시작되고, 구성요소를 실행하고 화면 UI요소를 변경하는데 사용하는 응용프로그램의 메인 스레드다.

플랫폼은 다른 스레드에서 UI변경을 시도하려는 것을 발견하면 즉시 CalledFromWrongThreadException을 던져서 응용프로그램에 알려준다.
*런타임은 하나의 스레드에서만 UI요소에 접근하도록 허용한다.

UI 요소는 UI스레드에서만 접근할 수 있기 때문에 UI요소에 대한 접근은 동기화를 필요로 하지 않는다.
즉, 런타임은 UI 요소에 대해 싱글스레드 환경을 적용하므로 동시성 문제에 영행을 받지 않는다.

UI스레드는 플랫폼에서 다른 스레드가 보낸 이벤트를 실행할 수 있는 순차적 이벤트 핸들러 스레드이다. 이벤트는 차례대로 처리되며 UI스레드가 먼저 들어온 이벤트를 처리하고 있으면 큐에 들어간다.


####3.1.2 바인더 스레드
>바인더 스레드는 서로 다른 프로세스에서 스레드 사이의 통신에 사용된다. 각 프로세스는 Thread pool이라는 스레드의 집합을 유지한다. 

 - 스레드 풀은 결코 종료되거나 재생성되지 않지만, 프로세스 안에서 다른 스레드의 요청에 따라 태스크를 실행할 수 있다. 
 - 이러한 스레드는  시스템 서비스, 인텐트, 콘텐츠 프로바이더, 서비스 등 다른 프로세스에서 들어오는 요청을 처리한다.
 - 필요한 경우 들어오는 요청을 처리하기 위해 새로운 바인더 스레드가 생성된다.
 - 대부분의 경우 바인터 스레드에 대해 신경 쓸 필요가 없다. 대부분 UI 스레드를 먼저 사용하도록 요청을 변형하기 때문이다.


####3.1.3 백그라운드 스레드
>응용프로그램에서 명시적으로 생성하는 모든 스레드는 백그라운드 스레드다. 어떤 태스크를 싱행하기 위해 대기하고 이있는 빈 실행환경임을 의미한다. UI스레드의 속성, 우선순위등을 상속받는다.



##3.2 리눅스 프로세스와 스레드 
> 안드로이드 플랫폼은 리눅스 기반의 OS이며 모든 응용프로그램은 OS에서 리눅스 응용프로그램으로 실행된다.

```text
사용자 ID ( UID )
- 리눅스는 멀티유저 시스템이며 프로세스는 리눅스 시스템에서 사용자를 나타내는 고유한 사용자 ID를 가지고 있다.

프로세스 ID ( PID )
- 프로세스 고유 식별자

부모 프로세스 ID ( PPID )
- 실행 시스템은 실행중인 프로세스의 트리 계층구조를 형성한다. 따라서 각 응용프로그램 프로세스는 부모 프로세스를 가지고 , 안드로이드에서 모든 프로세스의 부모는 , "Zygote"이다.

스택
- 지역함수 포인터와 변수

힙 Heap !!!!!!!!!!!
- 프로세스에 할당된 주소 공간. 주소공간은 프로세스에 전용으로 유지되며 다른 프로세스에 의해 접근될 수 없다.
```

**응용프로그램이 생성하고 시작한 모든 스레드, 리눅스 네이티브 스레드, 즉 `pthreads` 이다.
스레드는 자신을 생성한 프로세스에 소속되며, 각 스레드의 부모는 해당 프로세스다.


- 프로세스는 다른 프로세스와 비교하여 격리된 응용프로그램인 반면, 
  스레드는 프로세스 내에서 다른 스레드와 자원을 공유한다.
- 프로세스와 스레드의 중요한 차이는, 
프로세스끼리는 서로 주소 공간을 공유하지 않지만, 스레드끼리는 프로세스 내에서 주소 공간을 공유한다는 점이다.
- 스레드 사이의 메모리 공유는 빠른 통신을 가능하게 한다.
- 프로세스가 시작되면, 하나의 스레드가 자동으로 해당 프로세스에 만들어지고 프로세스는 항상 실행을 처리할 수 있는 적어도 하나의 스레드를 가지고 있다.

####3.2.1 스케줄링
> 리눅스에서 실행을 위한 기본 단위는 프로세스가 아니라 스레드이다.
> 안드로이드에서 스케줄링이란 프로세스가 아닌 스레드에 관한것이다.

- 스케줄링은 프로세서에 스레드의 실행시간을 할당한다.
- 스케줄러는 문맥 교환이 발생하고 새로운 스레드가 선택되기 전에 어떤 스레드를 실행해야하는지 , 얼마나 오래 실행해야 하는지 결정한다.
- 스케줄러 유형에 따라 다른 몇 가지 스레드 속성에 의존해서 다음에 실행할 스레드를 선택
- 안드로이드 응용프로그램 스레드는 달빅 가상머신이 아닌 리눅스 커널의 표준 스케줄러에 의해 스케줄링
- 실제로 이것은 우리 응용프로그램의 스레드들이 실행시가을 위해 응용프로그램 내의 스레드기리 직접 경쟁할 뿐만아니라 다른 모든 응용 프로그램의 모든 스레드와도 경쟁

> 리눅스 커널 스케줄러는 완전히 공정한 스케줄러 CFS 로 알려져있다.

#####우선순위
리눅스에서 스레드 우선순위는 나이스니스값 또는 나이스값이라고 불린다. 낮은 나이스니스는 높은 우선순위에 해당한다.

#####컨트롤 그룹
안드로이드에서 가장 중요한 그룹은 `포그라운드 그룹` 과 `백그라운드 그룹` 이다.
포그라운드 그룹의 스레드는 배그라운드 그룹의 스레드보다 더 많은 실행 시간을 할당받는다.
백그라운드 그룹의 스레드는 모두합하여 5~10 % 이상의 실행시간을 가질 수 없다.
따라서 많은 백그라운드 스레드를 생성한 응용프로그램은 UI스레드의 성능을 감소 시킬 수 잇따.
