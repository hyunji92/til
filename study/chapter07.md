Part || 비동기 기법
#기본 스레드의 생명주기 관리
> 스레드 사용의 몇가지 기본사항을 다루고, 안드로이드 구성요소와 협력하는 스레드에 대해 보고, 스레드 관리로 마무리!

###7.1 기본사항
> 안드로이드 Thread클래스는 일반 자바 프로그래밍에서의 Thread 클래스와 다르지 않다.
> 안드로이드의 Thread는 리눅스에서 응용프로그램이 가지게 되는 하부 리눅스 네이티브 스레드의 가장 가까운 표현체이다.

Thread는 Runable을 구현한다.그래서 실행되는 작업으 스래드 자체이거나 스레드가 생성하는 동안 주입되어 정의된다.

####7.1.1 생명주기 
` | 생성 |`
- 스레드 실행전에 Thread객체를 생성해야함
- 기본적으로 스레드 셍성시 new Thread는 생성되고있는 동일한 스레드 그룹에 동일한 우선순위로 할당된다.
즉, UI스레드로부터 생성된 스레드 UI스레드와 같은 우선순위의 스레드 그룹에 속한다.

` | 실행 |`
- Thread.start() 가 호출될때 실행환경 설정, 준비, Runable()상태
- 스케줄러가 실행을 위해 스레드를 선태가면 run 메서드 호출

` | 차단 , 대기 |`
1. Thread.sleep() : 스레드가 일정 시간 동안 자도록 만든 후 다시 실행하기 위해
2. Thread.yield() : 스레드가 포기하고 스케줄러가 어떤 스레드를 실행할지 결정하게 한다.
(스케줄러는 자유롭게 실행할 스레드를 선택 , 스케줄러가 다른 스레드를 선택한다는 보장은 없다.)

` | 종료 |`
1. run메서드가 실행을 완료하면 스레드가 종료되고 스레드의 자원은 해제될 수 있다. - 최종상태
2. Thread인스턴스나 실행환경의 재상용의 불가능하다.

####7.1.2 인터럽트
> 응용프로그램은 태스크가 완료되기 전에 스레드의 실행을 종료하길 원할 수 있다.
> 대신 스레드가 종료하도록 스레드에 `인터럽트`를 요청할 수 있다. 

- 인터럽트에 대한 실행 여부는 스레드 자체가 결정한다.
- 스레드 인터럽트는 공통으로 구현되고 즉, 스래드가 자신을 인터럽트 가능하게 하면 다른 스레드가 그 스레드에 인터럽트를 요청하는 식이다.
- 인터럽트된 스레드는 인터럽트를 감지하고 정사적으로 종료할 수 있도록 자신의 플래그를 확인해야한다.
- 스레드는 다른 스레드가 자신을 인터럽트하고 종료할 수 있도록 취소지점을 구현해야한다.

```java
public class SimpleThread extands Thread{
	@Override
    public void run(){
    	while(isInterrunpted() == false){
        	//스레드가 살아있다.
        }
        // 태스크가 완료되고 스레드가 종료된다.
        // 인터럽트 플래그를 확인하여 구현한다.
        // 현재 차단된 스레드가 인터럽트 되면 InterrupException을 던진다.
    }
}
```
`따라서`, 스레드가 인터럽트시 어떤 정리작업도 수행할 필요가 없다면 스레드는 더 위쪽 스택으로 Interrupexception을 전달해야 한다.

```java
void myMethod(){
	tru {
    	//차단호출
    } catch (InterruptedException e) {
    	//1. 정리작업
        //2. 다시한번 인터럽트
        Thread.currentThread().interrupt();
    }
}
```

*NOTE*
- Thread.interrupted()는 인터럽트 프래그값을 지우는 작업을 가져온다.
- Thread.stop()를 사용한지마 ; 공유객체를 일관적이지 못하고 예측 불가능하게 만든다.

####7.1.3 잡히지 않는 에러
>실행중인 java thread는 Runnable.run()메서드의 끝과 같이 코드 경로가 끝에 도달하거나 더 실행 코다가 없을때 정상적으로 종료한다.
>필수적으로 try/catch 절 안에 처리코드를 피요로하지않아서 스레드의 호출 스택을 따라 전파할 수 있따.
>스레드가 종료되기 전에 호출되는 UncaughExceptionHandler 를 부착할 수 있다.


- 스레드 전역 핸들러
```java
static void setDefaultUncaughtExceptionHandler(
	Thread.UncaughtExceptionHandler handler;
)
```

- 스레드 지역 핸들러
```java
void setUncaughtExceptionHandler(Thread.UncaughtExceptionhandler handler);
// 지역핸들러가 위의 전역보다 우선시되고 전역핸들러는 호출되지 않는다.
```

###7.2 스레드 관리
> 응용프로그램은 사용할 스레드의 수, 재사용 방법, 인터럽트 시기, 화면 회전 동안 스레드가 유지되어야 하는지 여부등을 결정해야한다.
스레드 특성
1. 스레드 생명주기 정의와 시작
2. 스레드 유지
3. 스레드 취소


####7.2.1 정의와 시작
> 스레드는 여러 구성요소의 생명주기보다 오래 살 수 있고, 재새용되지 않는 경우에도 오래된 구성요소 객체를 메모리에 유지할 수 있다. 


#####익명 내부클래스
